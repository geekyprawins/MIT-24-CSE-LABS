
	AREA RESET, DATA, READONLY
	EXPORT __Vectors
__Vectors
	DCD 0X10001000
	DCD Reset_Handler
	ALIGN
	AREA mycode, CODE, READONLY
	EXPORT Reset_Handler
	
Reset_Handler
	
	LDR R0, N1
	LDR R1, N2
	
	BL PACKEDTOHEX
	MOV R6, R5
	MOV R0, R1
	BL PACKEDTOHEX
	MOV R7, R5
	
	MUL R8, R6, R7
	MOV R0, R8
	BL HEXTOPACKED
	
HERE 
	B HERE
		
	
PACKEDTOHEX
	LDR R2, =10
	LDR R3, =1
	LDR R5, =0
	
LOOP1
	AND R4, R0, #0X0000000F
	MLA R5, R4, R3, R5
	MUL R3, R3, R2
	LSR R0, #4
	CMP R0, #0
	BNE LOOP1
	BX LR
	
HEXTOPACKED
	LDR R5, =DST
	ADD R5, #3
	LDR R6, =2	
	LDR R4, =0
		
LOOP2
	CMP R0, #10
	BCC DIGIT
	SUB R0, #10
	ADD R4, #1
	B LOOP2

DIGIT 
	SUBS R6, #1
	LSLEQ R0, #4
	ORREQ R0, R7
	STRBEQ R0, [R5], #-1
	LDREQ R6, =2
	MOVNE R7, R0
	MOV R0, R4
	LDR R4, =0
	CMP R0, #0
	BNE LOOP2
	
	CMP R6, #0
	STRBNE R7, [R5], #-1
	
	BX LR
	
N1 DCD 0X00000015
N2 DCD 0X00000012
	
	AREA mydata, DATA, READWRITE
DST DCD 0
	END
	
	